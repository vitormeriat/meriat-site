<!DOCTYPE html>
<html>

  ﻿<head>
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-90757610-1', 'auto');
    ga('send', 'pageview');
  </script>

  <script type="text/javascript">
  var appInsights=window.appInsights||function(config){
    function i(config){t[config]=function(){var i=arguments;t.queue.push(function(){t[config].apply(t,i)})}}var t={config:config},u=document,e=window,o="script",s="AuthenticatedUserContext",h="start",c="stop",l="Track",a=l+"Event",v=l+"Page",y=u.createElement(o),r,f;y.src=config.url||"https://az416426.vo.msecnd.net/scripts/a/ai.0.js";u.getElementsByTagName(o)[0].parentNode.appendChild(y);try{t.cookie=u.cookie}catch(p){}for(t.queue=[],t.version="1.0",r=["Event","Exception","Metric","PageView","Trace","Dependency"];r.length;)i("track"+r.pop());return i("set"+s),i("clear"+s),i(h+a),i(c+a),i(h+v),i(c+v),i("flush"),config.disableExceptionTracking||(r="onerror",i("_"+r),f=e[r],e[r]=function(config,i,u,e,o){var s=f&&f(config,i,u,e,o);return s!==!0&&t["_"+r](config,i,u,e,o),s}),t
    }({
        instrumentationKey:"d4823b90-66dc-43d1-84c6-7da8a3796ebd"
    });
    window.appInsights=appInsights;
    appInsights.trackPageView();
</script>

  <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Vitor Meriat</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Vitor Meriat" />
	<meta name="keywords" content="cloud computing, machine learning, big data, iot, developer, data scientist" />
	<meta name="author" content="Vitor Meriat" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="/assets/favicon.ico">

	<!-- Google Webfont -->
	<link href='https://fonts.googleapis.com/css?family=PT+Mono' rel='stylesheet' type='text/css'>
	<!-- Themify Icons -->
	<link rel="stylesheet" href="/assets/css/themify-icons.css">
	<!-- Icomoon Icons -->
	<link rel="stylesheet" href="/assets/css/icomoon-icons.css">
	<!-- Bootstrap -->
	<link rel="stylesheet" href="/assets/css/bootstrap.css">
	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/assets/css/owl.theme.default.min.css">
	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/assets/css/magnific-popup.css">
	<!-- Easy Responsive Tabs -->
	<link rel="stylesheet" href="/assets/css/easy-responsive-tabs.css">
	<!-- Theme Style -->
	<link rel="stylesheet" href="/assets/css/style.css?v2">

	<link href="/assets/css/font-awesome.min.css" rel="stylesheet">

	<link rel="stylesheet" href="/assets/css/default.min.css">
    <script src="/assets/js/highlight.min.js"></script>
	<link rel="stylesheet" href="/assets/css/obsidian.css">

	<script>hljs.initHighlightingOnLoad();</script>

	<!-- FOR IE9 below -->
	<!--[if lte IE 9]>
	<script src="js/modernizr-2.6.2.min.js"></script>
	<script src="js/respond.min.js"></script>
	<![endif]-->
</head>


  <body>
    <!-- Header -->
	<header id="fh5co-header" role="banner">
		<div class="container">
      <div id="fh5co-logo">
				<a href="/">
					<img src="/assets/images/logo-d.png" alt="Work Logo">
				</a>
			</div>
      <div style="text-align: center;">
        <a href="/"><h2 style="margin-top: 0px !important;">Vitor Meriat</h2></a>
        <span style="font-size: 1em; color: black;">Microsoft <b>A</b>rtificial <b>I</b>ntelligence MVP - Data science & Machine Learning Engineer</span>
      </div>
			<!-- Mobile Toggle Menu Button -->
			<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>

			<!-- Main Nav -->
			<div id="fh5co-main-nav">
				<nav id="fh5co-nav" role="navigation">
					<ul>
						<li class="">
							<a href="/">Blog</a>
						</li>
						<li class="">
							<a href="/archive/">Archives</a>
						</li>
            <li class="">
							<a href="/category/">Categories</a>
						</li>
            <li class="">
							<a href="/about/"> About me </a>
						</li>
					</ul>
				</nav>
			</div>
			<!-- Main Nav -->
		</div>
	</header>
	<!-- Header -->
    <main role="main">
      <div class="container">
  <article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="row">
      <div class="fh5co-spacer fh5co-spacer-sm"></div>
      <div class="col-md-12 text-center">
        <h1>Columm Store x Row Store e o In-Memory</h1>
        
      </div>
      
        <h2 class="fh5co-uppercase-heading-sm text-center">
          Big Data &amp; NoSQL
        </h2>
      
      <span><time datetime="2015-07-17T00:00:00-03:00" itemprop="datePublished">Jul 17, 2015</time></span>
    </div>
    <div class="fh5co-spacer fh5co-spacer-md"></div>
    <section class="section-padding post" itemprop="articleBody">
      <p><strong>IoT</strong>, <strong>Mobile</strong>, <strong>Big Data</strong>, <strong>Stream Analytics</strong> e por ai vai. Cada vez temos mais referências da necessidade dos chamados <strong>NoSQLs</strong>. A verdade é que o cenário de armazenamento de dados clássico tem se tornado inviável em alguns cenários. Para aqueles de nós que já estão vendo este futuro hoje, vale entender as bases deste novo mundo cheio de diferenças em relação ao nosso tradicional modelo relacional de armazenamento de dados.&lt;/p&gt;</p>

<p>Com a crescente necessidade de análise de grandes volumes de dados no menor tempo possível, bancos de dados baseados em uso intensivo de memória <strong>RAM</strong> (In-Memory) estão cotados como sendo a solução mais viável. A principal diferença entre os bancos de dados** In-Memory** e os “<u>tradicionais/clássicos</u>” já conhecidos, está na forma de armazenamento dos dados, <strong><em>Column Store vs Row Store. </em></strong>Vamos considerar uma tabela organizada nos dois modelos:</p>

<h2 id="row-store">Row Store</h2>

<p align="center"><img src="http://blob.vitormeriat.com.br/images/2015/07/Untitled-1.png" class="absolute-bg" /></p>

<h2 id="column-store">Column Store</h2>

<p align="center"><img src="http://blob.vitormeriat.com.br/images/2015/07/Untitled-5.png" class="absolute-bg" /></p>

<p>Ao invés de cada registro da tabela ficar armazenado em uma linha, o registro passa a ser armazenado em colunas separadas. Essa forma de armazenamento tem algumas vantagens, como exemplo a capacidade de compressão dos dados, se formos analisar a compressão de um banco onde os registros são armazenados em linha, encontraremos em uma mesma linha diferentes tipos (domínios) o que torna o processo mais complicado, já no banco orientado a colunas, cada coluna irá conter o mesmo tipo (domínio) de dado. De acordo com algumas pesquisas o nível de compressão alcançado  em bancos orientados a colunas chega a ser de <strong>60%</strong> a <strong>70%</strong>  mais eficiente que nos bancos orientados a linhas.</p>

<p>Para o caso de armazenamento dos dados em colunas é necessário que haja um relacionamento entre as colunas para identificar que a mesma pertence a um registro específico, para resolver esse problema a estratégia de incluir um ID virtual é normalmente adotada, nesse caso a representação do armazenamento em colunas ficaria como a imagem abaixo:</p>

<p align="center"><img src="http://blob.vitormeriat.com.br/images/2015/07/Untitled-8.png" class="absolute-bg" /></p>

<p>Vamos a seguinte query:</p>

<pre style="font-size: 1.2em !important">
    <code class="sql">
  SELECT AVG(PESSOA_IDADE) FROM PESSOA
    </code>
</pre>

<p>Em um banco de dados orientado a linhas, esta consulta irá recuperar todas as linhas, carregando todos os campos para executar a operação e retornar a média de idade, já no banco de dados orientado a colunas apenas a coluna <strong>PESSOA_IDADE</strong> será levada em consideração, o que neste caso vai consumir menos recursos.</p>

<p>Vale lembrar que um <strong>SELECT * FROM PESSOA</strong>, possivelmente não terá vantagem alguma já que todas as colunas precisarão ser lidas.</p>

<p>As principais técnicas aplicadas a banco de dados em coluna são particionamento, indexação, compressão e uma série de estratégias para realização dos <strong>JOINS</strong>.</p>

<p>A utilização de armazenamento em colunas torna-se viável com a utilização de arquiteturas de hardware modernas com grande número de processadores e grandes quantidades de memória. Os tipos de sistemas mais indicados para uso de armazenamento em colunas são os sistemas que precisam ler e realizar operações de consultas em grandes volumes de dados (<a href="http://pt.wikipedia.org/wiki/OLAP">OLAP</a>), para sistemas do tipo <a href="http://pt.wikipedia.org/wiki/OLTP">OLTP</a> as operações de escrita podem não ser tão vantajosas.</p>

<p>Alguns fornecedores permitem que uma tabela seja definida como <strong>Column Store</strong> ou <strong>Row Store</strong> dentro do mesmo banco de dados. Mesmo com as implicações desta abordagem, o grande desafio dos fabricantes hoje é desenvolver as melhores soluções que consigam extrair o máximo do hardware e abstrair as complexidades para os usuários.</p>

<p>Para quem se interessar pelo assunto, deixo alguns links com boas informações sobre <strong>Column Store</strong>.</p>

<h2 id="referências">Referências</h2>

<ul>
<li><a href="http://cs-www.cs.yale.edu/homes/dna/talks/Column_Store_Tutorial_VLDB09.pdf">Column-Oriented Database Systems</a></li>
<li><a href="http://db.csail.mit.edu/projects/cstore/abadi-sigmod08.pdf"><em>Column</em>–<em>Stores</em> vs. Row-Stores: How Different Are They Really?</a></li>
<li><a href="http://en.wikipedia.org/wiki/Column-oriented_DBMS">Column Oriented DBMS</a></li>
</ul>

    </section>
  </article>

  <hr/>
  <section class="author">
  	<header> <a href=""> <img class="profile" src="/assets/images/profile.jpg" alt="Author's profile picture"></a></header>
  	<article>
  		<!-- Author Name -->
      	<h4>  </h4>
      	<!-- Author Bio -->
      	<p>
      		Vitor is a computer scientist who is passionate about creating software that will positively change the world we live in.
      	</p>
        <p>
          Microsoft MVP in AI - Cloud Architect - Data science enthusiast
        </p>
      </article>
  </section>
  <hr/>

  <div style="margin-top: 60px; margin-bottom: 60px;">
    
    
      3 minutes to read
    
  </div>

  <div class="PageNavigation">
  
    <a class="prev" href="/2015/07/15/control-led-iocontrolando-o-delay-de-um-led-no-arduino-com-node-js-e-socket-io/"><i class="fa fa-lg fa-arrow-left"></i> Control LED IO–Controlando o delay de um LED no Arduino com Node.js e Socket.io</a>
  
  
    <a class="next" href="/2015/08/09/machine-learning-in-the-cloudazure-ibm-e-amazon/">Machine Learning in the Cloud–Azure, IBM e Amazon <i class="fa fa-lg fa-arrow-right"></i></a>
  
  </div>
</div>
<div style="height: 80px;"></div>

    </main>

    <footer id="fh5co-footer" role="contentinfo">
	<div class="container">
		<div class="row">
			<div class="col-md-12" style="text-align: right;">
				<ul class="fh5co-footer-social">
					<li><a href="https://twitter.com/vitormeriat" target="_blank"><i class="fa fa-twitter fa-1x"></i> Twitter</a></li>
					<li><a href="https://github.com/vitormeriat" target="_blank"><i class="fa fa-github fa-1x"></i> Github</a></li>
					<li><a href="https://www.linkedin.com/in/vitormeriat" target="_blank"><i class="fa fa-linkedin fa-1x"></i> LinkedIn</a></li>
					<li><a href="https://www.instagram.com/vitormeriat/" target="_blank"><i class="fa fa-instagram fa-1x"></i> Instagram</a></li>
					<li><a href="https://www.youtube.com/user/vitormeriat/" target="_blank"><i class="fa fa-youtube fa-1x"></i> Youtube</a></li>
				</ul>
				<p class="fh5co-copyright">
					<small>(c) 2017 <a href="/">Meriat's</a>. All Rights Reserved.
					</small>
				</p>
			</div>
		</div>
	</div>
</footer>

	<!-- Go To Top -->
	<a href="#" class="fh5co-gotop"><i class="ti-shift-left"></i></a>

	<!-- jQuery -->
	<script src="/assets/js/jquery-1.10.2.min.js"></script>
	<!-- jQuery Easing -->
	<script src="/assets/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="/assets/js/bootstrap.js"></script>
	<!-- Owl carousel -->
	<script src="/assets/js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
 <script src="/assets/js/jquery.magnific-popup.min.js"></script>
	<!-- Easy Responsive Tabs -->
	<script src="/assets/js/easyResponsiveTabs.js"></script>
	<!-- FastClick for Mobile/Tablets -->
	<script src="/assets/js/fastclick.js"></script>
	<!-- Velocity -->
	<script src="/assets/js/velocity.min.js"></script>
	<!-- Main JS -->
	<script src="/assets/js/main.js"></script>


  </body>
</html>
