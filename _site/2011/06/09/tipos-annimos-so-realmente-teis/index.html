<!DOCTYPE html>
<html>

  ﻿<head>
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-90757610-1', 'auto');
    ga('send', 'pageview');
  </script>

  <script type="text/javascript">
  var appInsights=window.appInsights||function(config){
    function i(config){t[config]=function(){var i=arguments;t.queue.push(function(){t[config].apply(t,i)})}}var t={config:config},u=document,e=window,o="script",s="AuthenticatedUserContext",h="start",c="stop",l="Track",a=l+"Event",v=l+"Page",y=u.createElement(o),r,f;y.src=config.url||"https://az416426.vo.msecnd.net/scripts/a/ai.0.js";u.getElementsByTagName(o)[0].parentNode.appendChild(y);try{t.cookie=u.cookie}catch(p){}for(t.queue=[],t.version="1.0",r=["Event","Exception","Metric","PageView","Trace","Dependency"];r.length;)i("track"+r.pop());return i("set"+s),i("clear"+s),i(h+a),i(c+a),i(h+v),i(c+v),i("flush"),config.disableExceptionTracking||(r="onerror",i("_"+r),f=e[r],e[r]=function(config,i,u,e,o){var s=f&&f(config,i,u,e,o);return s!==!0&&t["_"+r](config,i,u,e,o),s}),t
    }({
        instrumentationKey:"d4823b90-66dc-43d1-84c6-7da8a3796ebd"
    });
    window.appInsights=appInsights;
    appInsights.trackPageView();
</script>

  <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Vitor Meriat</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Vitor Meriat" />
	<meta name="keywords" content="cloud computing, machine learning, big data, iot, developer, data scientist" />
	<meta name="author" content="Vitor Meriat" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="/assets/favicon.ico">

	<!-- Google Webfont -->
	<link href='https://fonts.googleapis.com/css?family=PT+Mono' rel='stylesheet' type='text/css'>
	<!-- Themify Icons -->
	<link rel="stylesheet" href="/assets/css/themify-icons.css">
	<!-- Icomoon Icons -->
	<link rel="stylesheet" href="/assets/css/icomoon-icons.css">
	<!-- Bootstrap -->
	<link rel="stylesheet" href="/assets/css/bootstrap.css">
	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/assets/css/owl.theme.default.min.css">
	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/assets/css/magnific-popup.css">
	<!-- Easy Responsive Tabs -->
	<link rel="stylesheet" href="/assets/css/easy-responsive-tabs.css">
	<!-- Theme Style -->
	<link rel="stylesheet" href="/assets/css/style.css?v1">

	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
	<link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/obsidian.css">

	<script>hljs.initHighlightingOnLoad();</script>

	<!-- FOR IE9 below -->
	<!--[if lte IE 9]>
	<script src="js/modernizr-2.6.2.min.js"></script>
	<script src="js/respond.min.js"></script>
	<![endif]-->
</head>


  <body>
    <!-- Header -->
	<header id="fh5co-header" role="banner">
		<div class="container">
      <div id="fh5co-logo">
				<a href="/">
					<img src="/assets/images/logo-d.png" alt="Work Logo">
				</a>
			</div>
      <div style="text-align: center;">
        <a href="/"><h2 style="margin-top: 0px !important;">Vitor Meriat</h2></a>
        <span style="font-size: 1em; color: black;">Microsoft <b>A</b>rtificial <b>I</b>ntelligence MVP - Data science & Machine Learning Engineer</span>
      </div>
			<!-- Mobile Toggle Menu Button -->
			<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>

			<!-- Main Nav -->
			<div id="fh5co-main-nav">
				<nav id="fh5co-nav" role="navigation">
					<ul>
						<li class="">
							<a href="/">Blog</a>
						</li>
						<li class="">
							<a href="/archive/">Archives</a>
						</li>
            <li class="">
							<a href="/category/">Categories</a>
						</li>
            <li class="">
							<a href="/about/"> About me </a>
						</li>
					</ul>
					<!-- <a href="http://www.vitormeriat.com.br/" target="_blank" class="fh5co-nav-call-to-action js-fh5co-nav-call-to-action">Blog</a> -->
          <!-- <a href="/about/" class="">About me</a> -->
				</nav>
			</div>
			<!-- Main Nav -->
		</div>
	</header>
	<!-- Header -->
    <main role="main">
      <div class="container">
  <article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="row">
      <div class="fh5co-spacer fh5co-spacer-sm"></div>
      <div class="col-md-12 text-center">
        <h1>Tipos anônimos são realmente úteis?</h1>
        
      </div>
      
        <h2 class="fh5co-uppercase-heading-sm text-center">
          C# &amp; CLR
        </h2>
      
      <span><time datetime="2011-06-09T00:00:00-03:00" itemprop="datePublished">Jun 9, 2011</time></span>
    </div>
    <div class="fh5co-spacer fh5co-spacer-md"></div>
    <section class="section-padding post" itemprop="articleBody">
      <p>Os tipos anônimos (Anonymous Types) são uma característica da linguagem C# onde criamos diversas propriedades para um objeto sem ter que definir explicitamente seu tipo. Essa novidade surgiu na versão 3.0 junto com diversas outras tais como: propriedades automáticas, inferência de tipos, inicializadores de objetos, expressões lambda, métodos de extensão dentre outros.</p>

<p>A referência para tipos anônimos na MSDN diz que tipos anônimos fornecem uma maneira conveniente de encapsular um conjunto de propriedades apenas leitura em um simples objeto sem que seja necessário primeiro definir explicitamente um tipo. O nome do tipo é gerado pelo compilador e não está disponível no nível do código fonte. <strong>O tipo das propriedades é inferido pelo compilador</strong>.</p>

<p>Um tipo anônimo pode ser declarado da seguinte maneira:</p>

<pre style="font-size: 16pt !important">
<code class="javascript">
static void Main(string[] args)
{
    // Criando um tipo anônimo
    var tipoAnonimo = new { Nome = "Meriat", Idade = 26, Altura = 1.78 };
}
</code>
</pre>

<p>Neste caso a variável tipoAnonimo é um tipo anônimo que possui três propriedades:</p>

<ul>
  <li>Nome do tipo System.String;</li>
  <li>Idade do tipo System.Int32;</li>
  <li>Altura do tipo System.Double.</li>
</ul>

<p>Os tipo anônimos são muito úteis quando realizamos consultas usando o LINQ uma vez que normalmente temos que retornar um tipo com o conjunto de propriedades diferentes dos tipos já existentes. Vamos realizar algumas consultas para exemplificar esta assertiva:</p>

<pre style="font-size: 16pt !important">
<code class="javascript">
static void Main(string[] args)
{
    // Cria um objeto de contexto
    ContextoDeDados contexto = new ContextoDeDados();
    
    // Consulta os desenvolvedores que trabalham em um empresa específica
    var consulta1 = contexto.desenvolvedores.Where(c =&gt; Empresa == "Meriat $ Cia");
    
    // Consulta desenvolvedores maiores de idade
    var consluta2 = from c in contexto.desenvolvedores
        where c.Idade &gt; 18
        select new { c.Nome, c.Empresa, c.Linguagem };
    
    // Consulta desenvolvedores que programam em C#
    var consulta3 = from c in contexto.desenvolvedores
        where c.Linguagem = "C#"
        selec new { c.Empresa };
}
</code>
</pre>

<p>A primeira consulta retorna um tipo que contém três propriedades(Nome, Empresa e Linguagem) e no segundo exemplo obtemos um tipo com apenas uma propriedade( Empresa). Sem o recuso dos tipos anônimos teríamos que definir explicitamente a classe para representar os tipos retornados.</p>

<p>Quando um tipo anônimo é atribuído a uma variável, a variável deve ser inicializada com a construção <a href="http://msdn.microsoft.com/pt-br/library/bb383973.aspx">var</a>. Isso ocorre porque apenas o compilador tem acesso ao nome base do tipo anônimo.</p>

<p>Quando criamos um tipo anônimo o compilador gera uma classe selada interna que modela o tipo . O tipo anônimo é imutável: todas as suas propriedades estão no modo somente leitura. Essa classe contém substituições de Equals() e GetHashCode() que implementam a semântica de valores. Além disso, o compilador gera uma substituição de ToString(), que exibe o valor de cada uma das propriedades públicas.</p>

<p>Tipos anônimo são tipos de referência, derivam diretamente de <strong>object</strong>. Durante sua criação o compilador lhe atribui um nome que é inacessível para a aplicação. Da perspectiva do CLR, um tipo anônimo não é diferente de qualquer outro tipo por referência, exceto pelo fato de não poder ser convertido para qualquer tipo.</p>

<h2 id="limitações">Limitações</h2>

<p>Os tipos anônimos apresentam limitações que devem ser conhecidas para que seu uso possa ser mais consciente. Quando se opta por usar tipos anônimos é necessário saber que eles não são símbolos C# válidos, sua validade fica a nível de CLR. Isto implica na impossibilidade de definir métodos de extensão, de declarar métodos com tipos anônimos como parâmetros e retornar tipos anônimos a partir de métodos.</p>

<h2 id="resposta">Resposta</h2>

<p>É certo que os tipos anônimos tem limitações, então qual sua real utilidade?</p>

<p>Penso que a utilização de tipos anônimos(sempre com o uso do bom senso) é muito vantajosa pelos seguintes pontos:</p>

<ul>
  <li>O compilador escreve os códigos muito mais rápido que você! Ele cria um calhamaço de código para cada tipo anônimo que criamos;</li>
  <li>É uma ótima maneira de economizar tempo (Time is money);</li>
  <li>Não destroem o desing da aplicação. São uma excelente alternativa para valores locais desafogando a necessidade que muitas vezes se tinha de criar uma classe para se trabalhar com os retornos;</li>
  <li>Por serem anônimos podem seu utilizados para trazer um maior desacoplamento, separando lógicas específicas sem a dependência de tipos já definidos.</li>
</ul>

<p>Existem algumas estratégias que possibilitam um uso mais apurado dos tipos anônimos. Mais isto fica para o próximo post.</p>

<p>Baixo e código fonte do post <a href="httpcid-bd055aa47a388023.office.live.comself.aspx.PublicTiposAnonimos.rar" target="_blank">aqui</a>!</p>

<h3 id="um-grande-abraço-e-ótimo-estudo">Um grande abraço e ótimo Estudo!</h3>

    </section>
  </article>

  <hr/>
  <section class="author">
  	<header> <a href=""> <img class="profile" src="/assets/images/profile.jpg" alt="Author's profile picture"></a></header>
  	<article>
  		<!-- Author Name -->
      	<h4>  </h4>
      	<!-- Author Bio -->
      	<p>
      		Vitor is a computer scientist who is passionate about creating software that will positively change the world we live in.
      	</p>
        <p>
          MVP Azure - Cloud Architect - Data science enthusiast
        </p>
      </article>
  </section>
  <hr/>

  <div style="margin-top: 60px; margin-bottom: 60px;">
    
    
      4 minutes to read
    
  </div>

  <div class="PageNavigation">
  
    <a class="prev" href="/2011/06/07/porque-setconfigurationsettingpublisher-precisa-ser-chamado-antes-de-fromconfigurationsetting/"><i class="fa fa-lg fa-arrow-left"></i> Porque SetConfigurationSettingPublisher precisa ser chamado antes de FromConfigurationSetting?</a>
  
  
    <a class="next" href="/2011/06/15/windows-azure-dica-rpida-roleenvironment-getconfigurationsettingvalue-e-o-erro-sehexception/">Windows Azure dica rápida: RoleEnvironment.GetConfigurationSettingValue e o erro SEHException <i class="fa fa-lg fa-arrow-right"></i></a>
  
  </div>
</div>
<div style="height: 80px;"></div>

    </main>

    <footer id="fh5co-footer" role="contentinfo">
	<div class="container">
		<div class="row">
			<div class="col-md-12" style="text-align: right;">
				<ul class="fh5co-footer-social">
					<li><a href="https://twitter.com/vitormeriat" target="_blank"><i class="fa fa-twitter fa-1x"></i> Twitter</a></li>
					<li><a href="https://github.com/vitormeriat" target="_blank"><i class="fa fa-github fa-1x"></i> Github</a></li>
					<li><a href="https://www.linkedin.com/in/vitormeriat" target="_blank"><i class="fa fa-linkedin fa-1x"></i> LinkedIn</a></li>
					<li><a href="https://www.instagram.com/vitormeriat/" target="_blank"><i class="fa fa-instagram fa-1x"></i> Instagram</a></li>
					<li><a href="https://www.facebook.com/vitormeriat/" target="_blank"><i class="fa fa-facebook fa-1x"></i> Facebook</a></li>
					<li><a href="https://www.youtube.com/user/vitormeriat/" target="_blank"><i class="fa fa-youtube fa-1x"></i> Youtube</a></li>
				</ul>
				<p class="fh5co-copyright">
					<small>(c) 2017 <a href="/">Meriat's</a>. All Rights Reserved.
					</small>
				</p>
			</div>
		</div>
	</div>
</footer>

	<!-- Go To Top -->
	<a href="#" class="fh5co-gotop"><i class="ti-shift-left"></i></a>

	<!-- jQuery -->
	<script src="/assets/js/jquery-1.10.2.min.js"></script>
	<!-- jQuery Easing -->
	<script src="/assets/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="/assets/js/bootstrap.js"></script>
	<!-- Owl carousel -->
	<script src="/assets/js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
 <script src="/assets/js/jquery.magnific-popup.min.js"></script>
	<!-- Easy Responsive Tabs -->
	<script src="/assets/js/easyResponsiveTabs.js"></script>
	<!-- FastClick for Mobile/Tablets -->
	<script src="/assets/js/fastclick.js"></script>
	<!-- Velocity -->
	<script src="/assets/js/velocity.min.js"></script>
	<!-- Main JS -->
	<script src="/assets/js/main.js"></script>


  </body>
</html>
