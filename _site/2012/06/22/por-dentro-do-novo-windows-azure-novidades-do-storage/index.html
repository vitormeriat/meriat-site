<!DOCTYPE html>
<html>

  ﻿<head>
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-90757610-1', 'auto');
    ga('send', 'pageview');
  </script>

  <script type="text/javascript">
  var appInsights=window.appInsights||function(config){
    function i(config){t[config]=function(){var i=arguments;t.queue.push(function(){t[config].apply(t,i)})}}var t={config:config},u=document,e=window,o="script",s="AuthenticatedUserContext",h="start",c="stop",l="Track",a=l+"Event",v=l+"Page",y=u.createElement(o),r,f;y.src=config.url||"https://az416426.vo.msecnd.net/scripts/a/ai.0.js";u.getElementsByTagName(o)[0].parentNode.appendChild(y);try{t.cookie=u.cookie}catch(p){}for(t.queue=[],t.version="1.0",r=["Event","Exception","Metric","PageView","Trace","Dependency"];r.length;)i("track"+r.pop());return i("set"+s),i("clear"+s),i(h+a),i(c+a),i(h+v),i(c+v),i("flush"),config.disableExceptionTracking||(r="onerror",i("_"+r),f=e[r],e[r]=function(config,i,u,e,o){var s=f&&f(config,i,u,e,o);return s!==!0&&t["_"+r](config,i,u,e,o),s}),t
    }({
        instrumentationKey:"d4823b90-66dc-43d1-84c6-7da8a3796ebd"
    });
    window.appInsights=appInsights;
    appInsights.trackPageView();
</script>

  <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Vitor Meriat</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Vitor Meriat" />
	<meta name="keywords" content="cloud computing, machine learning, big data, iot, developer, data scientist" />
	<meta name="author" content="Vitor Meriat" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="/assets/favicon.ico">

	<!-- Google Webfont -->
	<link href='https://fonts.googleapis.com/css?family=PT+Mono' rel='stylesheet' type='text/css'>
	<!-- Themify Icons -->
	<link rel="stylesheet" href="/assets/css/themify-icons.css">
	<!-- Icomoon Icons -->
	<link rel="stylesheet" href="/assets/css/icomoon-icons.css">
	<!-- Bootstrap -->
	<link rel="stylesheet" href="/assets/css/bootstrap.css">
	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/assets/css/owl.theme.default.min.css">
	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/assets/css/magnific-popup.css">
	<!-- Easy Responsive Tabs -->
	<link rel="stylesheet" href="/assets/css/easy-responsive-tabs.css">
	<!-- Theme Style -->
	<link rel="stylesheet" href="/assets/css/style.css?v1">

	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
	<link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/obsidian.css">

	<script>hljs.initHighlightingOnLoad();</script>

	<!-- FOR IE9 below -->
	<!--[if lte IE 9]>
	<script src="js/modernizr-2.6.2.min.js"></script>
	<script src="js/respond.min.js"></script>
	<![endif]-->
</head>


  <body>
    <!-- Header -->
	<header id="fh5co-header" role="banner">
		<div class="container">
      <div id="fh5co-logo">
				<a href="/">
					<img src="/assets/images/logo-d.png" alt="Work Logo">
				</a>
			</div>
      <div style="text-align: center;">
        <a href="/"><h2 style="margin-top: 0px !important;">Vitor Meriat</h2></a>
        <span style="font-size: 1em; color: black;">MVP Azure - Cloud Architect - Data science enthusiast</span>
      </div>
			<!-- Mobile Toggle Menu Button -->
			<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>

			<!-- Main Nav -->
			<div id="fh5co-main-nav">
				<nav id="fh5co-nav" role="navigation">
					<ul>
						<li class="">
							<a href="/">Blog</a>
						</li>
						<li class="">
							<a href="/archive/">Archives</a>
						</li>
            <li class="">
							<a href="/category/">Categories</a>
						</li>
            <li class="">
							<a href="/about/"> About me </a>
						</li>
					</ul>
					<!-- <a href="http://www.vitormeriat.com.br/" target="_blank" class="fh5co-nav-call-to-action js-fh5co-nav-call-to-action">Blog</a> -->
          <!-- <a href="/about/" class="">About me</a> -->
				</nav>
			</div>
			<!-- Main Nav -->
		</div>
	</header>
	<!-- Header -->
    <main role="main">
      <div class="container">
  <article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="row">
      <div class="fh5co-spacer fh5co-spacer-sm"></div>
      <div class="col-md-12 text-center">
        <h1>Por dentro do novo Windows Azure. Novidades do Storage</h1>
        
      </div>
      
        <h2 class="fh5co-uppercase-heading-sm text-center">
          Cloud Computing &amp; Microsoft Azure &amp; Microsoft Azure Storage
        </h2>
      
      <span><time datetime="2012-06-22T00:00:00-03:00" itemprop="datePublished">Jun 22, 2012</time></span>
    </div>
    <div class="fh5co-spacer fh5co-spacer-md"></div>
    <section class="section-padding post" itemprop="articleBody">
      <p align="justify">Ao longo da minha parca experiência com o <strong>Windows Azure</strong> pude ver em diversos momentos algumas solicitações e anseios da comunidade por mudanças em alguns recursos do serviço de storage do Azure. Parece que o time de Azure estava bem atento e trouxe novidades significativas nesta release, tornando o <strong>Windows Azure Storage</strong> mais “atraente”.</p>
<p>As novidades para o serviço de armazenamento do Windows Azure não foram tantas, porém foram essenciais. Neste post vou relatar de forma resumida estas alterações.</p>
<p><a href="http://blob.vitormeriat.com.br/images/2012/06/big-data-on-windows-azure.png"><img style="background-image:none;padding-left:0;padding-right:0;display:block;float:none;margin-left:auto;margin-right:auto;padding-top:0;border-width:0;" title="Big Data on Windows Azure" alt="Big Data on Windows Azure" src="http://blob.vitormeriat.com.br/images/big-data-on-windows-azure.png" width="560" height="146" /></a></p>
<p><!--more-->
<p>&#160;</p>
<h2><font>Recursos de Lease para Blobs aprimorados</font></h2>
<p align="justify">Trabalhar com concorrência no mundo dos sistemas distribuídos como o Azure pode muitas vezes se tornar uma dor de cabeça. Este é um recurso de locação do blob que permite criar um bloqueio exclusivo em determinado blob para impedir que ele seja modificado ou excluído. Mas como citado no início do parágrafo, outro uso para esta funcionalidade é gerenciar a concorrência em um ambiente <strong>multi-threaded</strong>. Para saber mais detalhes indico o ótimo post <a href="http://blog.smarx.com/posts/managing-concurrency-in-windows-azure-with-leases" target="_blank">Managing Concurrency in Windows Azure with Leases</a> do Steve Marx. </p>
<p align="justify">Segue a lista com as melhorias da funcionalidade de lease:</p>
<ul>
<li>
<div align="justify">Agora operações de locação podem ser realizadas em um contêiner blob. Nas versões anteriores isso só podia ser feito diretamente em blobs; </div>
</li>
<li>
<div align="justify">Agora você pode adquirir um contrato de locação que nunca termina. Anteriormente você só podia adquirir locação de um blob em um período válido por apenas 1 minuto; </div>
</li>
<li>
<div align="justify">Além de adquirir um contrato de locação sem fim, você também pode adquirir locação de curta duração sendo válido a partir de 15 até 60 segundos; </div>
</li>
</ul>
<p align="justify"><font color="#777777">Mais detalhes indico a leitura do artigo <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/new-blob-lease-features-infinite-leases-smaller-lease-times-and-more.aspx" target="_blank">New Blob Lease Features: Infinite Leases, Smaller Lease Times, and More.</a></font></p>
<h2>&#160;</h2>
<h2><font>Copiando Blobs para diferentes contas de armazenamento</font></h2>
<p align="justify">Ai está uma baita novidade. Nas versões anteriores não era possível copiar um Blob para outra conta de armazenamento. Considere o seguinte cenário: Você precisa fazer o “backup” de seus dados de uma conta de origem para uma conta de destino. Antes seria necessário buscar todo o conteúdo da conta origem para depois fazer o upload para a conta destino. Agora podemos resolver isso facilmente.</p>
<p align="justify">Claro que como nem tudo são flores é necessário ter alguns cuidados:</p>
<ul>
<li>
<div align="justify">Este recurso só é valido para contas de armazenamento criadas após 07/06/2012; </div>
</li>
<li>
<div align="justify">Para se copiar dados de uma conta origem, a mesma deve ter acesso público. Caso contrário a URL gerada deve ser assinada usando uma assinatura de acesso compartilhado que tenha acesso de “leitura” ao blob origem; </div>
</li>
<li>
<div align="justify">Nas versões anteriores copiar um blob era uma operação síncrona, agora a cópia de blobs é trabalhada de forma assíncrona; </div>
</li>
<li>
<div align="justify"><font color="#ff0000"><strong>[Essa merece destaque]</strong></font> Agora para copiar um blob não precisamos mais que ele esteja no Windows Azure Sotorage podendo ser por exemplo um objeto da <strong>Amzaon S3</strong>. A exigência fica por conta do acesso que deve ser público ou ter a URL assinada como citado anteriormente. Isto é realmente útil no sentido da integração e evita a necessidade de salvar certos conteúdos como blobs no Azure para sincronizar em uma base destino. Agora fica fácil utilizar o Windows Azure Storage como backup de seus dados de blobs armazenados em outro provedor de armazenamento na nuvem. </div>
</li>
<li>
<div align="justify"><font color="#555555">Caso sua conta de destino em um centro de dados diferente da conta de origem será cobrado a saída de dados… lógico, nem tudo são flores… kkk</font> </div>
</li>
</ul>
<p>&#160;</p>
<h2><font>Assinatura de acesso compartilhado para Tables</font></h2>
<p align="justify">Nas versões anteriores somente sendo proprietário de uma conta de armazenamento do Windows Azure era possível executar operações CRUD. Agora o <strong>WAS</strong>(Windows Azure Storage), ampliou a funcionalidade de Shared Access Signature.</p>
<p align="justify">Na prática o SAS (<strong>Shared Access Signature</strong>), fornece acesso granular aos recursos de armazenamento. Você precisa fornecer um token SAS com permissão predefinido (leitura, escrita, lista, exclusão, etc), que aparece na URL assinada. Logo um usuário em posse desta URL assinada tem permissão para executar operações permitidas pelo token SAS usando API REST sem realmente ter acesso as credenciais da conta de armazenamento. <img style="border-style:none;" class="wlEmoticon wlEmoticon-smile" alt="Sorriso" src="http://blob.vitormeriat.com.br/images/wlemoticon-smile.png" /></p>
<p align="justify">Alguns comentários sobre o SAS para os recursos da tabela:</p>
<ul>
<li>
<div align="justify">Você pode conceder acesso a uma tabela como um todo <strong>(ou seja, todos os dados na tabela)</strong> ou a um intervalo da tabela <strong>(ou seja, dados selecionados da uma tabela)</strong>. Vamos dizer que você está construindo uma aplicação multi-tenant e você está armazenando os dados de cada inquilino em uma tabela separada, agora você pode usar esta funcionalidade de SAS para criar tokens para tabelas separadas e dar uma URL assinada para cada inquilino;</div>
</li>
<li>
<div align="justify">Você pode conceder direitos de acesso a uma tabela específica ou intervalo da tabela, <strong>tais como Pesquisar, Adicionar, Alterar, Excluir ou uma combinação deles</strong> . O que isto significa é que você pode ter o controle realmente refinado sobre o que um usuário tem acesso de fazer por meio da URL assinada;</div>
</li>
<li>
<div align="justify">Você pode <strong>definir um horário de início e fim para fornecer acesso em tempo limitado ou fornecer acesso a grandes períodos de tempo.</strong></div>
</li>
</ul>
<p><strong><font color="#777777"></font></strong></p>
<h2><strong><font color="#777777"></font></strong></h2>
<h2><strong><font color="#777777">Assinatura de acesso compartilhado para Queues</font></strong></h2>
<p align="justify"><font color="#777777">Assim como foi supracitado, você tem os mesmos benefícios de Shared Access Signature para o serviço de Filas do Windows Azure. Vamos as observações:</font></p>
<ul>
<li>
<div align="justify">Você pode conceder direitos de acesso a uma fila específica, como Read ou Peek das mensagens o que isto significa é que você pode ter o controle realmente refinado sobre o que um usuário tem acesso de fazer por meio da URL assinada;</div>
</li>
<li>
<div align="justify">Você pode <strong>definir um horário de início e fim para fornecer acesso em tempo limitado ou fornecer acesso a grandes períodos de tempo;</strong></div>
</li>
<li>
<div align="justify">Como o SAS para blobs, é possível gerar tokens SAS com ou sem política de acesso, sendo recomendável a utilização de políticas de acesso para uma melhor admininstração.</div>
</li>
</ul>
<p align="justify"><font color="#777777"></font></p>
<h2 align="justify"><font color="#777777"><font></font></font></h2>
<h2 align="justify"><font color="#777777"><font>A nova API</font></font></h2>
<p align="justify"><font color="#777777">Com estas alterações vieram as novidades na API REST. Abaixo segue uma pequena lista com os novos recurso bem como as atualizações:</font></p>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/dd894037" target="_blank">Copy Blob (REST API)</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/ee691972" target="_blank">Lease Blob (REST API)</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj159098" target="_blank">Abort Copy Blob (REST API)</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj159103" target="_blank">Lease Container (REST API)</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj159100" target="_blank">Get Table ACL (REST API)</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj159102" target="_blank">Set Table ACL (REST API)</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj159101" target="_blank">Get Queue ACL (REST API)</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj159099" target="_blank">Set Queue ACL (REST API)</a></p>

</p>

    </section>
  </article>

  <hr/>
  <section class="author">
  	<header> <a href=""> <img class="profile" src="/assets/images/profile.jpg" alt="Author's profile picture"></a></header>
  	<article>
  		<!-- Author Name -->
      	<h4>  </h4>
      	<!-- Author Bio -->
      	<p>
      		Vitor is a computer scientist who is passionate about creating software that will positively change the world we live in.
      	</p>
        <p>Share this post: <a href="http://twitter.com/share?text=Por dentro do novo Windows Azure. Novidades do Storage&amp;url=http://localhost:4000/2012/06/22/por-dentro-do-novo-windows-azure-novidades-do-storage/"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><i class="fa fa-twitter fa-1x"></i> Twitter</a> - <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2012/06/22/por-dentro-do-novo-windows-azure-novidades-do-storage/"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;"><i class="fa fa-facebook fa-1x"></i> Facebook</a></p>
      </article>
  </section>
  <hr/>

  <div style="margin-top: 60px; margin-bottom: 60px;">
    
    
      6 minutes to read
    
  </div>

  <div class="PageNavigation">
  
    <a class="prev" href="/2012/06/10/windows-azure-tour-conhecendo-o-novo-portal/"><i class="fa fa-lg fa-arrow-left"></i> Windows Azure Tour - Conhecendo o novo portal</a>
  
  
    <a class="next" href="/2012/06/26/por-dentro-do-novo-windows-azure-windows-azure-service-management-api-rest/">Por dentro do novo Windows Azure. Windows Azure Service Management API REST <i class="fa fa-lg fa-arrow-right"></i></a>
  
  </div>
</div>
<div style="height: 80px;"></div>

    </main>

    <footer id="fh5co-footer" role="contentinfo">
		<div class="container">
			<div class="row">
				<div class="col-md-push-6 col-md-9">
					<ul class="fh5co-footer-social">
						<li><a href="https://twitter.com/vitormeriat" target="_blank"><i class="fa fa-twitter fa-1x"></i> Twitter</a></li>
						<li><a href="https://github.com/vitormeriat" target="_blank"><i class="fa fa-github fa-1x"></i> Github</a></li>
						<li><a href="https://www.linkedin.com/in/vitormeriat" target="_blank"><i class="fa fa-linkedin fa-1x"></i> LinkedIn</a></li>
						<li><a href="https://www.instagram.com/vitormeriat/" target="_blank"><i class="fa fa-instagram fa-1x"></i> Instagram</a></li>
						<li><a href="https://www.facebook.com/vitormeriat/" target="_blank"><i class="fa fa-facebook fa-1x"></i> Facebook</a></li>
					</ul>
					<p class="fh5co-copyright">
						<small>(c) 2017 <a href="/">Meriat's</a>. All Rights Reserved.
						</small>
					</p>
				</div>
			</div>
		</div>
	</footer>

	<!-- Go To Top -->
	<a href="#" class="fh5co-gotop"><i class="ti-shift-left"></i></a>

	<!-- jQuery -->
	<script src="/assets/js/jquery-1.10.2.min.js"></script>
	<!-- jQuery Easing -->
	<script src="/assets/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="/assets/js/bootstrap.js"></script>
	<!-- Owl carousel -->
	<script src="/assets/js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
 <script src="/assets/js/jquery.magnific-popup.min.js"></script>
	<!-- Easy Responsive Tabs -->
	<script src="/assets/js/easyResponsiveTabs.js"></script>
	<!-- FastClick for Mobile/Tablets -->
	<script src="/assets/js/fastclick.js"></script>
	<!-- Velocity -->
	<script src="/assets/js/velocity.min.js"></script>
	<!-- Main JS -->
	<script src="/assets/js/main.js"></script>


  </body>
</html>
