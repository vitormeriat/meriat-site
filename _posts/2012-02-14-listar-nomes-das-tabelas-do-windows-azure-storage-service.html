---
layout: post
title: Listar nomes das tabelas do Windows Azure Storage Service
date: 2012-02-14 18:45:53.000000000 -02:00
type: post
published: true
status: publish
categories:
- Cloud Computing
- Microsoft Azure
- Microsoft Azure Storage
tags: []
meta:
  publicize_results: a:1:{s:7:"twitter";a:1:{i:61749732;a:2:{s:7:"user_id";s:11:"vitormeriat";s:7:"post_id";s:18:"169492589643440128";}}}
  _wpas_done_twitter: '1'
  tagazine-media: ''
author:
  login: vitormeriat
  email: vitormeriat@hotmail.com
  display_name: vitormeriat
  first_name: ''
  last_name: ''
---
<p align="justify">Ai vai uma dica rápida para quem está trabalhando com <strong>Azure</strong>.</p>
<p align="justify">Hoje tive a necessidade de listar todas as minhas tabelas do serviço de armazenamento do Windows Azure. Eu tinha que listar os nomes de todas as tabelas do desenvolvimento local e das minhas contas de acesso na nuvem.&#160; Com isso era preciso acessar e ler todas as tabelas modificando apenas meu <strong>Subscription ID</strong>. Considere esta necessidade quando você tem 100 ou mais tabelas penduradas no <strong>ATS</strong> (Azure Table Service) e ou várias contas no Azure</p>
<p><!--more-->
<p align="justify">O código completo segue na imagem abaixo:</p>
<p><a href="http://meriat-blog.azurewebsites.net/wp-content/uploads/2012/02/02.png"><img style="background-image:none;padding-left:0;padding-right:0;display:block;float:none;margin-left:auto;margin-right:auto;padding-top:0;border-width:0;" title="02" border="0" alt="02" src="{{ site.baseurl }}/assets/02_thumb.png" width="560" height="544" /></a></p>
<p align="justify">Tudo é muito simples: Nas linhas 6 e 7 fazemos referência aos <strong>namespaces</strong> necessários para a utilização da <strong>API</strong> do Azure.</p>
<p align="justify">Na linha 18 informo a string de conexão ao serviço de armazenamento de tabelas do Azure. Neste caso estou utilizando uma string que aponta para o desenvolvimento local por meio do <strong>Storage Emulator</strong>. Para listar as tabelas de uma conta na nuvem, basta apenas informar a string conforme o modelo da linha 17 alterando os campos “<strong>MinhaConta</strong>” e “<strong>MinhaSenha</strong>” para os respectivos valores de sua Subscription.</p>
<p align="justify">O método ListaNomesTabelas (linha 30) retorna uma lista de strings e recebe como parâmetro a string de conexão. Na linha 32 criamos a conta de acesso ao <strong>CloudStorage</strong> e na linha 34 criamos o <strong>CloudTableClient</strong> que fornece o cliente para acesso ao serviço de tabelas.</p>
<p align="justify">Agora ficou fácil, depois que criamos o TableClient basta apenas chamar o método <strong>ListTables() </strong>(linha 37)<strong> </strong>que teremos a lista com os nomes das tabelas pesquisadas. Ai é só escrever as informações na tela.</p>
<p><a href="http://meriat-blog.azurewebsites.net/wp-content/uploads/2012/02/03.png"><img style="background-image:none;padding-left:0;padding-right:0;display:block;float:none;margin-left:auto;margin-right:auto;padding-top:0;border-width:0;" title="03" border="0" alt="03" src="{{ site.baseurl }}/assets/03_thumb.png" width="540" height="308" /></a></p>
<p>O código deste exemplo pode ser baixado <a href="https://skydrive.live.com/?cid=BD055AA47A388023&amp;id=BD055AA47A388023%21125&amp;sc=documents#cid=BD055AA47A388023&amp;id=BD055AA47A388023%21224&amp;sc=documents" target="_blank">aqui!</a></p>
<p>&#160;</p>
<h3><strong>Um ótimo estudo a todos.</strong></h3>
<p><a href="http://meriat-blog.azurewebsites.net/wp-content/uploads/2011/10/arquitetura.png"><img style="display:inline;float:left;" title="Arquitetura" border="0" alt="Arquitetura" align="left" src="{{ site.baseurl }}/assets/arquitetura_thumb.png?w=81&amp;h=130&amp;h=130" width="81" height="130" /></a></p>
<p><strong>Twitter: <a href="http://twitter.com/vitormeriat">@vitormeriat</a></strong>    <br /><i><strong>Microsoft MSP – Brasília</strong></i>    <br /><a href="mailto:vitor.pereira@studentpartners.com.br">vitor.pereira@studentpartners.com.br</a>    <br /><a href="mailto:vitor.meriat@srnimbus.com">vitor.meriat@srnimbus.com</a></p>
