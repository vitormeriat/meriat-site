---
layout: post
title: Entendento o LINQ (parte 2)
date: 2010-12-29 20:04:50.000000000 -02:00
type: post
published: true
status: publish
categories:
- LINQ
- ORM
tags: []
meta:
  _wpas_done_twitter: '1'
  _wpas_done_ms: '1'
author:
  login: vitormeriat
  email: vitormeriat@hotmail.com
  display_name: vitormeriat
  first_name: ''
  last_name: ''
---
<h1>LINQ para SQL</h1>
<p>Até este momento tratamos apenas das consultas locais. Agora iremos abordar as consultas interpretadas que são descritivas e operam sequências que executam <strong>IQueryable&lt;T&gt;</strong> e se decompõem para operadores de consulta na classe Queryable, enviando árvores de expressão que serão interpretadas em tempo de execução.</p>
<p>Para entendermos seu funcionamento, vamos ao exemplo 5. O primeiro passo será a criação do Banco de dados. Neste exemplo, estarei utilizando um banco criado no próprio projeto. Crie o banco e uma tabela Desenvolvedores conforme a figura abaixo:</p>
<p><a href="https://meriatsite.blob.core.windows.net/images/2010/12/figura-1.png"><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;" title="figura 1" src="{{ site.baseurl }}/assets/figura-1_thumb.png" border="0" alt="figura 1" width="477" height="355" /></a></p>
<p>Agora que temos nossa fonte de dados criada, é só inserir alguns valores, como no script abaixo, para efetuarmos nossos testes:</p>
<div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:200px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;">
<div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;">
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum1" style="color:#606060;">   1:</span> INSERT INTO Desenvolvedores (Nome, Linguagem, Empresa, DataNascimento)</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum2" style="color:#606060;">   2:</span> VALUES (<span style="color:#006080;">'Vitor'</span>, <span style="color:#006080;">'C#'</span>, <span style="color:#006080;">'DevGeek'</span>, <span style="color:#006080;">'10-11-1984'</span>)</pre>
<p><!--CRLF--></p>
</div>
</div>
<div class="csharpcode">
<pre></pre>
</div>
<p>O próximo passo será a criação de nosso contexto. Neste exemplo, utilizamos uma classe chamada Desenvolvedor para representar os dados. O LINQ para SQL nos permite utilizar este recurso, desde que decoremos os atributos corretamente utilizando o namespace <em><strong>System.Data.Linq.Mapping</strong></em>.</p>
<div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:200px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;">
<div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;">
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum1" style="color:#606060;">   1:</span> [Table(Name = <span style="color:#006080;">"Desenvolvedores"</span>)]</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum2" style="color:#606060;">   2:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> Desenvolvedor</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum3" style="color:#606060;">   3:</span> {</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum4" style="color:#606060;">   4:</span>     [Column(IsPrimaryKey = <span style="color:#0000ff;">true</span>)]</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum5" style="color:#606060;">   5:</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">int</span> ID;</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum6" style="color:#606060;">   6:</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum7" style="color:#606060;">   7:</span>     [Column] <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> Nome;</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum8" style="color:#606060;">   8:</span>     [Column] <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> Linguagem;</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum9" style="color:#606060;">   9:</span>     [Column] <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> Empresa;</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum10" style="color:#606060;">  10:</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum11" style="color:#606060;">  11:</span>     [Column(Name = <span style="color:#006080;">"DataNascimento"</span>)]</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum12" style="color:#606060;">  12:</span>     <span style="color:#0000ff;">public</span> DateTime DataDeNascimento;</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum13" style="color:#606060;">  13:</span> }</pre>
<p><!--CRLF--></p>
</div>
</div>
<div class="csharpcode"></div>
<p>O atributo [Table] indica ao LINQ que um objeto deste tipo representa uma linha em uma tabela de um banco de dados. Seu padrão aponta que o nome da tabela é o mesmo da classe. Isso pode ser alterado caso necessário.</p>
<p>Esta classe decorada com os atributos de [Table], passa a ser chamada de entidade no LINQ para SQL. A melhores práticas indicam que sua estrutura deve ser idêntica à tabela do banco de dados, em uma construção de baixo nível.</p>
<p>O atributo [Column] indica que o campo ou propriedade representa uma coluna da tabela, e a propriedade <strong>IsPrimaryKey</strong> indica que a coluna é chave primaria na tabela. Caso haja necessidade, podemos utilizar nomes diferentes para a tabela e as colunas, desde que especifiquemos o nome correto com o atributo Name. A exemplo da tabela e da coluna DataDeNascimento.</p>
<p>Com nosso contexto criado, precisamos de uma “ponte” que nos ligue a fonte de dados externa. Esta ponte nós chamamos de <strong>DataContext</strong>.</p>
<p>&nbsp;</p>
<h1>DataContext</h1>
<p>Um objeto DataContext (do tipo <strong>System.Data.Linq.DataContext</strong>), age de duas maneiras. Primeiro como uma fábrica de geração de tabelas, e segundo, armazenando “vestígios” de qualquer alteração da entidade para que possamos escrever diretamente na memória de acesso rápido. O objeto DataContext monitora todas as entidades que ele intanciou.</p>
<p>Para termos acesso as tabelas, elas devem ser mapeadas e estar disponíveis em um objeto do tipo DataContext. O objeto DataContext suporta atualizações e manutenção do banco de dados para objetos conhecidos do LINQ e efetua o tratamento da conexão com o banco de dados. Vamos criar nosso DataContext como na listagem abaixo:</p>
<div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;height:58px;max-height:200px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;">
<div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;">
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum1" style="color:#606060;">   1:</span> DataContext contextoDeDados = <span style="color:#0000ff;">new</span> DataContext(“<span style="color:#0000ff;">string</span> de conexão”);</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum2" style="color:#606060;">   2:</span> Table&lt;Desenvolvedor&gt; desenvolvedores = contextoDeDados.GetTable&lt;Desenvolvedor&gt;();</pre>
<p><!--CRLF--></p>
</div>
</div>
<p>No código acima criamos um DataContext chamado contextoDeDados e uma coleção Table de nosso contexto. A classe <strong>Table&lt;TEntity&gt;</strong>, do namespace System.Data.Linq representa uma tabela do banco de dados. Ela implementa as interfaces <strong>IEnumerable&lt;T&gt;</strong> , <strong>IQueryable&lt;T&gt;</strong> e <strong>ITable</strong> que por sua vez implementa<strong> IEbumerable</strong> e <strong>IQueryable</strong>.</p>
<p>Utilizamos o método <strong>GetTable&lt;T&gt;</strong> do DataContext para criar um para criar um objeto Desenvovedor do tipo<strong> Table&lt;</strong><strong>Desenvovedor&gt;</strong> no contexto <strong>contextoDeDados</strong>. Notem que passamos como argumento do construtor DataContext a string de conexão. Agora nosso Banco de Dados passa a ser conhecido pelo LINQ.</p>
<p>Segue a listagem completa do Exemplo 5.</p>
<div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:200px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;">
<div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;">
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum1" style="color:#606060;">   1:</span> <span style="color:#008000;">// String de conexão com o banco</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum2" style="color:#606060;">   2:</span> <span style="color:#0000ff;">const</span> <span style="color:#0000ff;">string</span> sc = <span style="color:#006080;">@"String de Conexão"</span>;</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum3" style="color:#606060;">   3:</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum4" style="color:#606060;">   4:</span> <span style="color:#008000;">// Crio o objeto de contexto e informo a conexão para o banco</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum5" style="color:#606060;">   5:</span> DataContext contextoDeDados = <span style="color:#0000ff;">new</span> DataContext(sc);</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum6" style="color:#606060;">   6:</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum7" style="color:#606060;">   7:</span> Table&lt;Desenvolvedor&gt; desenvolvedores = contextoDeDados.GetTable&lt;Desenvolvedor&gt;();</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum8" style="color:#606060;">   8:</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum9" style="color:#606060;">   9:</span> var consulta = from c <span style="color:#0000ff;">in</span> desenvolvedores</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum10" style="color:#606060;">  10:</span>                <span style="color:#0000ff;">where</span> c.Linguagem == <span style="color:#006080;">"C#"</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum11" style="color:#606060;">  11:</span>                orderby c.DataDeNascimento, c.Nome</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum12" style="color:#606060;">  12:</span>                select <span style="color:#0000ff;">new</span> { c.Nome, c.Empresa, c.DataDeNascimento };</pre>
<p><!--CRLF--></p>
</div>
</div>
<p>Estamos fazendo uma consulta simples, onde selecionamos o Nome a empresa e a data de nascimento de todos os desenvolvedores que programam em C#. Ordenamos primeiro pela data de nascimento e depois pelo nome.</p>
<p>Iremos abordar uma solução mais elegante e recomendada, iremos utilizar um DataContext fortemente tipado, como na listagem abaixo:</p>
<div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:200px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;">
<div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;">
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum1" style="color:#606060;">   1:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">partial</span> <span style="color:#0000ff;">class</span> ContextoDeDados : DataContext</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum2" style="color:#606060;">   2:</span> {</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum3" style="color:#606060;">   3:</span>     <span style="color:#0000ff;">public</span> Table&lt;Desenvolvedor&gt; desenvolvedores;</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum4" style="color:#606060;">   4:</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum5" style="color:#606060;">   5:</span>     <span style="color:#0000ff;">public</span> ContextoDeDados() : <span style="color:#0000ff;">base</span>(<span style="color:#006080;">@"String"</span>)</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum6" style="color:#606060;">   6:</span>     { }</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum7" style="color:#606060;">   7:</span> }</pre>
<p><!--CRLF--></p>
</div>
</div>
<p>&nbsp;</p>
<p>Neste exemplo, declaro uma classe que herda de DataContext. Crio um campo desenvolvedor do tipo Table&lt;T&gt; para a tabela que será mapeada e chamo o construtor base de DataContext no construtor da classe, passando a string de conexão com o banco de dados. Agora para realizarmos uma consulta usando o contexto fortemente tipado, basta apenas criar uma instância do mesmo, como no exemplo abaixo.</p>
<div id="codeSnippetWrapper" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:97.5%;font-family:'Courier New', courier, monospace;direction:ltr;max-height:200px;font-size:8pt;overflow:auto;cursor:text;border:silver 1px solid;margin:20px 0 10px;padding:4px;">
<div id="codeSnippet" style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;padding:0;">
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum1" style="color:#606060;">   1:</span> <span style="color:#008000;">// Crio um objeto de contexto</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum2" style="color:#606060;">   2:</span> ContextoDeDados contexto = <span style="color:#0000ff;">new</span> ContextoDeDados();</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum3" style="color:#606060;">   3:</span> <span style="color:#008000;">// Consulto os desenvolvedores que trabalhama na empresa Literatura e Cia</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum4" style="color:#606060;">   4:</span> var consulta = contexto.desenvolvedores.Where(c =&gt; c.Empresa == <span style="color:#006080;">"Literatura e Cia"</span>);</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum5" style="color:#606060;">   5:</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum6" style="color:#606060;">   6:</span> Console.WriteLine();</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum7" style="color:#606060;">   7:</span> Console.WriteLine(<span style="color:#006080;">"Exemplo 6"</span>);</pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum8" style="color:#606060;">   8:</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:white;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum9" style="color:#606060;">   9:</span> <span style="color:#008000;">// Utilizo o método GetCommand para visualizar o comando SQL gerado.</span></pre>
<p><!--CRLF--></p>
<pre style="text-align:left;line-height:12pt;background-color:#f4f4f4;width:100%;font-family:'Courier New', courier, monospace;direction:ltr;color:black;font-size:8pt;overflow:visible;border-style:none;margin:0;padding:0;"><span id="lnum10" style="color:#606060;">  10:</span> <span style="color:#0000ff;">string</span> log = contexto.GetCommand(consulta).CommandText;</pre>
<p><!--CRLF--></p>
</div>
</div>
<p>Neste exemplo estou utilizando o método <strong>GetCommand</strong> para visualizar o comando SQL gerado.</p>
<p>O arquivo com todos os exemplos pode ser baixado <a href="http://cid-f47ea42a37bff249.office.live.com/browse.aspx/Artigos" target="_blank">AQUI</a></p>
<p><span style="font-family:Arial;">Espero que tenham gostado da dica e qualquer dúvida é só entrar em contato! </span></p>
<p><strong><span style="font-family:Arial;font-size:small;">Twitter: </span><a href="http://twitter.com/vitormeriat"><span style="font-family:Arial;font-size:small;">@vitormeriat</span></a></strong><span style="font-family:Arial;"><br />
</span><a href="mailto:vitormeriat@gmail.com"><span style="font-family:Arial;font-size:small;">vitormeriat@gmail.com</span></a><span style="font-family:Arial;"> </span><br />
<a href="mailto:vitor.pereira@studentpartners.com.br"><span style="font-family:Arial;font-size:small;">vitor.pereira@studentpartners.com.br</span></a><span style="font-family:Arial;"> </span></p>
<p>[]’s</p>
